<?php declare(strict_types=1);

use Hyva\Theme\Model\ViewModelRegistry;
use Hyva\Theme\ViewModel\HeroiconsSolid;
use Hyva\Theme\ViewModel\Modal;
use Magento\Framework\Escaper;

/** @var Escaper $escaper */
/** @var ViewModelRegistry $viewModels */
/** @var Modal $modelViewModel */
/** @var HeroiconsSolid $heroIcons */

$modelViewModel = $viewModels->require(Modal::class);
$heroIcons = $viewModels->require(HeroiconsSolid::class);
$modal = $modelViewModel->confirm()
    ->withTemplate('Magento_Theme::modals/template/confirmation-content.phtml')
    ->withTitle(__('Are you sure?'))
    ->withDetails($escaper->escapeHtml(__('This action is permanent. Be sure before taking action.')))
    ->withOKLabel(__('Yes'))
    ->withCancelLabel(__('No'))
    ->positionCenter()
    ->removeDialogClass('p-10', 'rounded-lg')
    ->addDialogClass('rounded-xl m-4');
?>

<div x-data="hyva.modal()">
    <button
        type="button"
        class="btn justify-center rounded-md py-3 px-6 text-base shadow-none hover:shadow-lg active:shadow disabled:shadow-none transition
            bg-blue-600 text-white border border-transparent hover:bg-blue-700 focus:ring-blue-200 active:bg-blue-700 disabled:bg-slate-600 disabled:text-slate-50 disabled:opacity-70"
        @click="<?= $escaper->escapeHtmlAttr($modal->getShowJs()) ?>"
    ><?= $escaper->escapeHtml(__('Show confirmation dialog')) ?></button>
    <?= /** @noEscape */ $modal ?>
</div>
